# Spec-Driven Development — BearLink

## Overview

BearLink uses spec-driven development powered by Claude Code. Specs are written in plain
language, refined over time, and used to generate concrete implementation tasks. The spec
is the source of truth — not the code comments, not the tickets, not the chat history.

## Lifecycle

```
Idea → Draft spec → Refine → Approve → Generate tasks → Implement → Done
```

1. **Idea** — Start a spec draft directly in `spec/` using `_template.md`
2. **Draft** — Create `spec/<feature-name>.md` from `_template.md`, fill in Goal and Requirements
3. **Refine** — Discuss with Claude, sharpen the requirements, update the spec
4. **Approve** — Set `Status: approved` when the spec is clear and ready to implement
5. **Generate tasks** — Ask Claude: _"Generate tasks for spec/my-feature.md"_
6. **Implement** — Claude works through tasks one by one, referencing the spec
7. **Update docs** — Update `docs/openapi.yaml` and/or `docs/asyncapi.yaml` to reflect new or changed endpoints and events
8. **Done** — Set `Status: done` when all acceptance criteria are verified and docs are updated

## File Naming

- One file per feature or epic
- Use kebab-case, **name the spec after the specific capability, not the service**
  - `analytics-aggregation-endpoints.md` — good
  - `analytics-improvements.md` — too broad, avoid
  - `analytics-improvements-2.md` — never do this
- Files starting with `_` are meta (template, workflow) — not specs

## Archiving Done Specs

When a spec reaches `done`, move it to `spec/done/`:

```
spec/
  auth-hardening.md             ← active
  done/
    analytics-improvements.md   ← completed, archived
```

This keeps the active spec directory focused on work in progress and avoids name
pressure when new specs are added for the same service area.

## Status Values

| Status | Meaning |
|--------|---------|
| `draft` | Being written, not ready for implementation |
| `review` | Ready to discuss or get feedback |
| `approved` | Approved for implementation |
| `in-progress` | Actively being implemented |
| `done` | Implemented and all acceptance criteria verified |

## Spec Format Rules

- **Goal** describes the problem and value — not the solution
- **Requirements** describe WHAT the system shall do — not HOW
- **Acceptance Criteria** are concrete and testable — each one maps to a test case
- **Out of Scope** is mandatory — explicitly bounding a spec prevents scope creep
- **Tasks** are generated by Claude from the requirements — never written manually

## Working with Claude

**To create a spec:**
> "Help me write a spec for [feature] in BearLink"

**To refine a spec:**
> "Review spec/my-feature.md and point out gaps or ambiguities"

**To generate tasks:**
> "Generate implementation tasks for spec/my-feature.md"

**To implement:**
> "Implement task 3 from spec/my-feature.md"

## Relationship to Other Docs

| File | Role |
|------|------|
| `spec/*.md` | Source of truth for planned and active work |
| `docs/openapi.yaml` | Describes what the API currently does (REST) |
| `docs/asyncapi.yaml` | Describes what the API currently does (events) |
| `CLAUDE.md` | Dev environment and architectural conventions |
