datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model URL {
  id                 Int       @id @default(autoincrement())
  originalUrl        String
  shortId            String    @unique
  customAlias        String?   @unique
  redirectType       Int       @default(302)
  expiresAt          DateTime?
  passwordHash       String?
  tags               String[]
  utmParams          Json?
  clicks             Int       @default(0)
  createdAt          DateTime  @default(now())
  userId             Int

  // Preview metadata (populated async after creation)
  previewTitle       String?
  previewDescription String?
  previewImageUrl    String?
  previewFetchedAt   DateTime?
}

enum Role {
  USER
  ADMIN
}